<div class="container-fluid topper">
  <div class="row">
    <div class="col-md-6 d-flex align-items-center">
      <mat-form-field appearance="outline">
        <input
          matInput
          (keydown.enter)="GetAllNews((p = 1)); CountNews()"
          [(ngModel)]="search"
        />
        <mat-label>ค้นหา</mat-label>
        <mat-icon matPrefix>search</mat-icon>
      </mat-form-field>
    </div>
    <div class="col-md-5 d-flex align-items-center">
      <mat-form-field appearance="outline">
        <mat-label>ประเภท</mat-label>
        <mat-select
          [(ngModel)]="region_id"
          (selectionChange)="GetAllNews((p = 1)); CountNews()"
        >
          <mat-option value="0">ทั้งหมด</mat-option>
          <mat-option *ngFor="let i of region" [value]="i.region_id">{{
            i.region_name
          }}</mat-option>
        </mat-select>
      </mat-form-field>
    </div>
    <div class="col-md-1 d-flex align-items-start justify-content-end">
      <button
        mat-raised-button
        color="primary"
        style="height: 53px; margin-top: 3px; width: 100%"
        (click)="href('add-news')"
      >
        <mat-icon>plus_one</mat-icon>
      </button>
    </div>
  </div>
  <div class="row">
    <div
      class="col-md-3 mt-3"
      *ngFor="
        let i of news
          | paginate
            : { itemsPerPage: limit, currentPage: p, totalItems: total }
      "
    >
      <mat-card
        class="h-100"
        style="cursor: pointer"
        (click)="href('news-detail/' + i.id)"
      >
        <div class="parent">
          <img
            [src]="i.image_path"
            style="height: 15vh; width: auto; object-fit: cover"
            mat-card-image
          />
          <img class="child" [src]="i.region_image" />
          <!-- <img
          class="role_child"
          src="https://www.pngkit.com/png/full/424-4240023_best-hot-price-new-.png"
        /> -->
        </div>
        <mat-card-content>
          <div class="row">
            <div
              class="col-md-12 d-flex justify-content-center d-flex flex-column"
              style="row-gap: 10px"
            >
              <b class="max-2">{{ i.title }}</b>
              <div [innerHTML]="i.detail" class="max-2"></div>
            </div>
          </div>
        </mat-card-content>

        <mat-card-actions align="end">
          <div class="d-flex align-items-center" style="column-gap: 5px">
            <mat-icon>remove_red_eye</mat-icon> <small>{{ i.views }}</small>
          </div>
        </mat-card-actions>
      </mat-card>
    </div>
  </div>

  <div class="row pt-4">
    <div class="col-md-12 d-flex justify-content-end">
      <pagination-controls
        (pageChange)="GetAllNews((p = $event))"
        previousLabel=""
        nextLabel=""
      ></pagination-controls>
    </div>
  </div>
</div>
