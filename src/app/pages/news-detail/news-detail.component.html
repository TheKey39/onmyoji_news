<div class="container-fluid topper">
  <div class="row">
    <div class="col-md-2 mt-3 max-70 d-flex">
      <mat-card style="opacity: 0.9;width:100%">
        <mat-card-content>
          <div class="row">
            <div class="col-md-12 d-flex justify-content-center">
              <div class="d-flex flex-column" style="row-gap: 10px">
                <img [src]="data?.image" class="profile text-center" />
                <b class="text-center">{{ data?.username }}</b>
              </div>
            </div>
          </div>
          <div class="row pt-3">
            <div class="col-md-12 d-flex flex-column" style="row-gap: 10px">
              <div class="d-flex justify-content-between">
                <b>จำนวนการดู</b>
                <div>{{ data?.views }}</div>
              </div>
              <div class="d-flex justify-content-between">
                <b>หมวดหมู่</b>
                <div>{{ data?.region_name }}</div>
              </div>
              <div class="d-flex justify-content-between">
                <b>วันที่สร้าง</b>
                <div>{{ data?.created_date }}</div>
              </div>
              <div class="d-flex justify-content-between">
                <b>วันที่แก้ไขล่าสุด</b>
                <div>{{ data?.update_date || "-" }}</div>
              </div>
            </div>
          </div>
        </mat-card-content>
      </mat-card>
    </div>
    <div class="col-md-6 mt-3 max-70">
      <div
        class="d-flex flex-column"
        style="
          row-gap: 10px;
          background-color: rgba(255, 255, 255, 0.9);
          border-radius: 4px;
          min-height: 70vh;
        "
      >
        <img
          [src]="data?.image_path"
          style="height: auto; width: 100%; object-fit: cover"
        />
        <div class="d-flex flex-column p-3 pt-1" style="row-gap: 10px">
          <b>{{ data?.title }}</b>
          <small>{{ data?.info }}</small>
          <div [innerHTML]="data?.detail"></div>
        </div>
      </div>
    </div>
    <div class="col-md-4 mt-3 max-70" [formGroup]="comment">
      <mat-card class="pb-5 pe-2" style="opacity: 0.9; min-height: 70vh">
        <mat-card-content>
          
          <div class="row pt-2 pe-4 ps-4" *ngFor="let i of comments">
            <div class="col-md-2 pt-2">
              <img [src]="i?.image" class="profile" />
            </div>
            <div
              class="col-md-10 pt-2 d-flex flex-row"
              style="column-gap: 10px"
            >
              <div class="d-flex flex-column">
                <b>{{ i?.username }}</b>
                <small style="opacity: 0.8">{{ i?.comment_date }}</small>
              </div>
            </div>
            <div
              class="col-md-10 offset-md-2 pt-1"
              [innerHTML]="i?.comment_detail"
            ></div>
          </div>

          <div class="row pt-4 pe-4 ps-4">
            <div class="col-md-12">
              <mat-form-field appearance="outline">
                <mat-label>ความคิดเห็น</mat-label>
                <textarea matInput formControlName="comment_detail"></textarea>
              </mat-form-field>
            </div>
          </div>
          <div class="row pt-2 pe-4 ps-4">
            <div class="col-md-12 d-flex justify-content-end">
              <button
                mat-raised-button
                color="primary"
                (click)="InsertComment()"
              >
                <mat-icon>sms</mat-icon>
              </button>
            </div>
          </div>
        </mat-card-content>
      </mat-card>
    </div>
  </div>
</div>
